<!DOCTYPE HTML>
<html lang="en">


<head>
    <meta charset="utf-8">
    <meta name="keywords" content="线激光扫描三维重建, Liuyveg">
    <meta name="description" content="Laser Scannar for 3D-ReconstructionPrinciple已知相机的内参矩阵$ K $以及世界坐标系到相机坐标系的外参矩阵$ R, T $，由一个三维世界坐标点可以计算出该点对应的像素坐标。但反过来，由一个点的">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="renderer" content="webkit|ie-stand|ie-comp">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="referrer" content="no-referrer-when-downgrade">
    <!-- Global site tag (gtag.js) - Google Analytics -->

<script async src="https://www.googletagmanager.com/gtag/js?id="></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag() {
        dataLayer.push(arguments);
    }

    gtag('js', new Date());
    gtag('config', '');
</script>


    <title>线激光扫描三维重建 | Liuyveg</title>
    <link rel="icon" type="image/png" href="https://cdn.jsdelivr.net/gh/Liuyveg/Liuyveg.github.io/david.png">

    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/Liuyveg/Liuyveg.github.io/libs/awesome/css/all.min.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/Liuyveg/Liuyveg.github.io/libs/materialize/materialize.min.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/Liuyveg/Liuyveg.github.io/libs/aos/aos.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/Liuyveg/Liuyveg.github.io/libs/animate/animate.min.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/Liuyveg/Liuyveg.github.io/libs/lightGallery/css/lightgallery.min.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/Liuyveg/Liuyveg.github.io/css/matery.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/Liuyveg/Liuyveg.github.io/css/my.css">

    <script src="https://cdn.jsdelivr.net/gh/Liuyveg/Liuyveg.github.io/libs/jquery/jquery-3.6.0.min.js"></script>

<meta name="generator" content="Hexo 6.1.0">
<style>.github-emoji { position: relative; display: inline-block; width: 1.2em; min-height: 1.2em; overflow: hidden; vertical-align: top; color: transparent; }  .github-emoji > span { position: relative; z-index: 10; }  .github-emoji img, .github-emoji .fancybox { margin: 0 !important; padding: 0 !important; border: none !important; outline: none !important; text-decoration: none !important; user-select: none !important; cursor: auto !important; }  .github-emoji img { height: 1.2em !important; width: 1.2em !important; position: absolute !important; left: 50% !important; top: 50% !important; transform: translate(-50%, -50%) !important; user-select: none !important; cursor: auto !important; } .github-emoji-fallback { color: inherit; } .github-emoji-fallback img { opacity: 0 !important; }</style>
<link rel="alternate" href="/atom.xml" title="Liuyveg" type="application/atom+xml">
</head>



   <style>
    body{
       background-image: url(https://cdn.jsdelivr.net/gh/Tokisaki-Galaxy/res/site/medias/background.jpg);
       background-repeat:no-repeat;
       background-size: 100% 100%;
       background-attachment:fixed;
    }
</style>



<body>
    <header class="navbar-fixed">
    <nav id="headNav" class="bg-color nav-transparent">
        <div id="navContainer" class="nav-wrapper container">
            <div class="brand-logo">
                <a href="/" class="waves-effect waves-light">
                    
                    <img src="https://cdn.jsdelivr.net/gh/Liuyveg/Liuyveg.github.io/medias/david.png" class="logo-img" alt="LOGO">
                    
                    <span class="logo-span">Liuyveg</span>
                </a>
            </div>
            

<a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fas fa-bars"></i></a>
<ul class="right nav-menu">
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/" class="waves-effect waves-light">
      
      <i class="fas fa-home" style="zoom: 0.6;"></i>
      
      <span>Index</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/tags" class="waves-effect waves-light">
      
      <i class="fas fa-tags" style="zoom: 0.6;"></i>
      
      <span>Tags</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/categories" class="waves-effect waves-light">
      
      <i class="fas fa-bookmark" style="zoom: 0.6;"></i>
      
      <span>Categories</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/archives" class="waves-effect waves-light">
      
      <i class="fas fa-archive" style="zoom: 0.6;"></i>
      
      <span>Archives</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/about" class="waves-effect waves-light">
      
      <i class="fas fa-user-circle" style="zoom: 0.6;"></i>
      
      <span>About</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/friends" class="waves-effect waves-light">
      
      <i class="fas fa-address-book" style="zoom: 0.6;"></i>
      
      <span>Friends</span>
    </a>
    
  </li>
  
  <li>
    <a href="#searchModal" class="modal-trigger waves-effect waves-light">
      <i id="searchIcon" class="fas fa-search" title="Search" style="zoom: 0.85;"></i>
    </a>
  </li>
</ul>


<div id="mobile-nav" class="side-nav sidenav">

    <div class="mobile-head bg-color">
        
        <img src="https://cdn.jsdelivr.net/gh/Liuyveg/Liuyveg.github.io/medias/david.png" class="logo-img circle responsive-img">
        
        <div class="logo-name">Liuyveg</div>
        <div class="logo-desc">
            
            一盏黄黄旧旧的灯|时间在旁闷不吭声|寂寞下手 毫无分寸|不懂得轻重之分
            
        </div>
    </div>

    <ul class="menu-list mobile-menu-list">
        
        <li class="m-nav-item">
	  
		<a href="/" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-home"></i>
			
			Index
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/tags" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-tags"></i>
			
			Tags
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/categories" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-bookmark"></i>
			
			Categories
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/archives" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-archive"></i>
			
			Archives
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/about" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-user-circle"></i>
			
			About
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/friends" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-address-book"></i>
			
			Friends
		</a>
          
        </li>
        
        
    </ul>
</div>


        </div>

        
    </nav>

</header>

    
<script src="https://cdn.jsdelivr.net/gh/Liuyveg/Liuyveg.github.io/libs/cryptojs/crypto-js.min.js"></script>
<script>
    (function() {
        let pwd = '';
        if (pwd && pwd.length > 0) {
            if (pwd !== CryptoJS.SHA256(prompt('请输入访问本文章的密码')).toString(CryptoJS.enc.Hex)) {
                alert('密码错误，将返回主页！');
                location.href = '/';
            }
        }
    })();
</script>




<div class="bg-cover pd-header post-cover" style="background-image: url('https://cdn.jsdelivr.net/gh/Liuyveg/Liuyveg.github.io/medias/featureimages/10.jpg')">
    <div class="container" style="right: 0px;left: 0px;">
        <div class="row">
            <div class="col s12 m12 l12">
                <div class="brand">
                    <h1 class="description center-align post-title">线激光扫描三维重建</h1>
                </div>
            </div>
        </div>
    </div>
</div>




<main class="post-container content">

    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Liuyveg/Liuyveg.github.io/libs/tocbot/tocbot.css">
<style>
    #articleContent h1::before,
    #articleContent h2::before,
    #articleContent h3::before,
    #articleContent h4::before,
    #articleContent h5::before,
    #articleContent h6::before {
        display: block;
        content: " ";
        height: 100px;
        margin-top: -100px;
        visibility: hidden;
    }

    #articleContent :focus {
        outline: none;
    }

    .toc-fixed {
        position: fixed;
        top: 64px;
    }

    .toc-widget {
        width: 345px;
        padding-left: 20px;
    }

    .toc-widget .toc-title {
        padding: 35px 0 15px 17px;
        font-size: 1.5rem;
        font-weight: bold;
        line-height: 1.5rem;
    }

    .toc-widget ol {
        padding: 0;
        list-style: none;
    }

    #toc-content {
        padding-bottom: 30px;
        overflow: auto;
    }

    #toc-content ol {
        padding-left: 10px;
    }

    #toc-content ol li {
        padding-left: 10px;
    }

    #toc-content .toc-link:hover {
        color: #42b983;
        font-weight: 700;
        text-decoration: underline;
    }

    #toc-content .toc-link::before {
        background-color: transparent;
        max-height: 25px;

        position: absolute;
        right: 23.5vw;
        display: block;
    }

    #toc-content .is-active-link {
        color: #42b983;
    }

    #floating-toc-btn {
        position: fixed;
        right: 15px;
        bottom: 76px;
        padding-top: 15px;
        margin-bottom: 0;
        z-index: 998;
    }

    #floating-toc-btn .btn-floating {
        width: 48px;
        height: 48px;
    }

    #floating-toc-btn .btn-floating i {
        line-height: 48px;
        font-size: 1.4rem;
    }
</style>
<div class="row">
    <div id="main-content" class="col s12 m12 l9">
        <!-- 文章内容详情 -->
<div id="artDetail">
    <div class="card">
        <div class="card-content article-info">
            <div class="row tag-cate">
                <div class="col s7">
                    
                    <div class="article-tag">
                        
                            <a href="/tags/Laser-Scannar/">
                                <span class="chip bg-color">Laser Scannar</span>
                            </a>
                        
                            <a href="/tags/3D-Reconstruction/">
                                <span class="chip bg-color">3D-Reconstruction</span>
                            </a>
                        
                    </div>
                    
                </div>
                <div class="col s5 right-align">
                    
                    <div class="post-cate">
                        <i class="fas fa-bookmark fa-fw icon-category"></i>
                        
                            <a href="/categories/3D-Reconstruction/" class="post-category">
                                3D-Reconstruction
                            </a>
                        
                    </div>
                    
                </div>
            </div>

            <div class="post-info">
                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-minus fa-fw"></i>Publish Date:&nbsp;&nbsp;
                    2022-03-30
                </div>
                

                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-check fa-fw"></i>Update Date:&nbsp;&nbsp;
                    2022-04-04
                </div>
                

                
                <div class="info-break-policy">
                    <i class="far fa-file-word fa-fw"></i>Word Count:&nbsp;&nbsp;
                    5.1k
                </div>
                

                

                
                    <div id="busuanzi_container_page_pv" class="info-break-policy">
                        <i class="far fa-eye fa-fw"></i>Read Count:&nbsp;&nbsp;
                        <span id="busuanzi_value_page_pv"></span>
                    </div>
				
            </div>
        </div>
        <hr class="clearfix">

        
        <!-- 是否加载使用自带的 prismjs. -->
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Liuyveg/Liuyveg.github.io/libs/prism/prism.css">
        

        
        <!-- 代码块折行 -->
        <style type="text/css">
            code[class*="language-"], pre[class*="language-"] { white-space: pre-wrap !important; }
        </style>
        

        <div class="card-content article-card-content">
            <div id="articleContent">
                <h1 id="Laser-Scannar-for-3D-Reconstruction"><a href="#Laser-Scannar-for-3D-Reconstruction" class="headerlink" title="Laser Scannar for 3D-Reconstruction"></a>Laser Scannar for 3D-Reconstruction</h1><h2 id="Principle"><a href="#Principle" class="headerlink" title="Principle"></a>Principle</h2><p>已知相机的内参矩阵$ K $以及世界坐标系到相机坐标系的外参矩阵$ R, T $，由一个三维世界坐标点可以计算出该点对应的像素坐标。但反过来，由一个点的像素坐标却无法求得该点的世界坐标。因为在计算像素坐标时，可以通过下述公式求出像素点的齐次坐标时$ p=[x, y, z] $，再同除以一个比例因子$ z $才能得到像素点的二维坐标$ p=[u, v] $。然而反过来，在计算世界坐标时，比例因子是未知的，只能计算得到$ P’_W=R^-(K^-p)-T $，但该点一定不是真实点，与真实值相差一个系数，因此点的深度信息是无法得知的，但可以知道真实点一定在相机中心$P_{CO}$与$ P’_W $ 的直线上，所以还需要其他深度信息才能得到真实点坐标。</p>
<script type="math/tex; mode=display">
s
\begin{bmatrix}
u \\ v \\ 1 \\
\end{bmatrix}=K
\begin{bmatrix}
R & T \\
\end{bmatrix}
\begin{bmatrix}
x \\ y \\ z \\
\end{bmatrix}</script><blockquote>
<p>工业上常采用双目相机形成极几何模型，来进行三维重建。如果只有一个相机，图像上的一个像素点可以对应三维空间中无数个点。因此当单目相机无法确定深度信息时，另一个相机视角可以唯一确定三维点的真实位置，从而重建出三维模型。</p>
</blockquote>
<p><img src="/images/LaserScannar/v2-58116d73c3f9cb63305268ea75a3d0b0_720w.jpg" style="zoom:60%;"></p>
<h3 id="线激光重建"><a href="#线激光重建" class="headerlink" title="线激光重建"></a>线激光重建</h3><p>在线激光扫描重建技术中，通过线激光的辅助作用，也可以得到物体点的深度信息，因此仅使用一个相机和线激光也是可以重建出三维点云的。由相机所拍摄的图像，可以确定像素点对应的三维点在相机光心与三维像点的连线上，从而可以计算出一条空间直线。由激光平面可以确定三维点一定位于激光平面上，从而联立直线方程与激光平面方程，可以立即求解出三维点坐标。</p>
<p><img src="/images/LaserScannar/v2-0b3c8fcf9ea9127230dbf2910f1be3d8_1440w.jpg" style="zoom:40%;"></p>
<h2 id="Related-work"><a href="#Related-work" class="headerlink" title="Related work"></a>Related work</h2><h3 id="激光照射方式"><a href="#激光照射方式" class="headerlink" title="激光照射方式"></a>激光照射方式</h3><ul>
<li><strong>直射式</strong></li>
</ul>
<p><img src="/images/LaserScannar/1648644259864-screenshot.png" style="zoom:40%;"></p>
<ul>
<li><strong>斜射式</strong></li>
</ul>
<p><img src="/images/LaserScannar/1648644293914-screenshot.png" style="zoom:40%;"></p>
<blockquote>
<p>对比两种测量方法，直射式激光三角法传感器主要接受物体表面线结构光的散射光线，对激光发射器的功率要求较高；而斜射式激光三角法由于入射光线与被测物体表面法线有一定的夹角，传感器主要接收反射光线。因此，在反射角相同的情况下，斜射式的分辨率更大，抗干扰能力强，对激光功率要求也较低。</p>
</blockquote>
<h3 id="旋转式与平移式"><a href="#旋转式与平移式" class="headerlink" title="旋转式与平移式"></a>旋转式与平移式</h3><ul>
<li><strong>旋转式激光扫描装置</strong></li>
</ul>
<p>旋转扫描可以实现对物体表面一周进行三维测量，将物体放置在转台上，相机和激光器位置固定不动，世界坐标系固定在转台中心。转台旋转360度，激光将会扫描测量物体表面一圈，计算出物体表面的在世界坐标系下的坐标，从而实现对物体的三维重建。</p>
<p><img src="/images/LaserScannar/QQ%E6%88%AA%E5%9B%BE20220331151654.png" style="zoom:60%;"></p>
<ul>
<li><strong>平移式激光扫描装置</strong></li>
</ul>
<p>平移式激光扫描采用移动导轨装置，将物体放置在导轨的平台上，相机和激光器固定在导轨的一侧，世界坐标系固定在导轨上。通过物体在导轨上移动，激光将会对物体表面进行扫描测量，以此求得物体表面的三维坐标。平移扫描适合对物体表面水平方向测量，无法对物体四周表面进行重建。为测量物体的全部表面，平移扫描可以将相机再次放置在另一侧，扫描物体另一侧的表面，最后对两次扫描结果进行点云融合，得到完整的物体表面。</p>
<p><img src="/images/LaserScannar/QQ%E6%88%AA%E5%9B%BE20220331151635.png" style="zoom:60%;"></p>
<h2 id="Procedure"><a href="#Procedure" class="headerlink" title="Procedure"></a>Procedure</h2><ol>
<li>使用<a target="_blank" rel="noopener" href="https://www.microsoft.com/en-us/research/wp-content/uploads/2016/02/tr98-71.pdf">张正友标定法</a>求解相机内参矩阵$K$</li>
<li>固定相机和激光器，采用棋盘靶标法求解相机外参$R,T$以及激光平面方程$ Ax+By+Cz=D $</li>
<li>通过平移扫描或旋转扫描，对物体表面进行三维测量得到点云模型</li>
</ol>
<h3 id="张正友标定法获取相机内参"><a href="#张正友标定法获取相机内参" class="headerlink" title="张正友标定法获取相机内参"></a>张正友标定法获取相机内参</h3><p><strong>张正友标定</strong>算法具体可参考论文<a target="_blank" rel="noopener" href="https://www.microsoft.com/en-us/research/wp-content/uploads/2016/02/tr98-71.pdf"><em>A Flexible New Technique for CameraCalibration</em></a>。其主要方法是使用一个棋盘格平面，并以该平面为世界坐标系的$Z=0$平面，相机通过在不同的位置对棋盘格进行拍摄得到多个视角下的棋盘图像，通过相关计算优化得到相机的内参矩阵。</p>
<blockquote>
<p>MATLAB中Camera Calibration工具可以帮助我们进行相机标定。具体步骤可参考这篇博客<a target="_blank" rel="noopener" href="https://blog.csdn.net/heroacool/article/details/51023921">https://blog.csdn.net/heroacool/article/details/51023921</a></p>
</blockquote>
<h3 id="棋盘靶标求解相机外参与激光平面"><a href="#棋盘靶标求解相机外参与激光平面" class="headerlink" title="棋盘靶标求解相机外参与激光平面"></a>棋盘靶标求解相机外参与激光平面</h3><p>相机内参得到之后，需将相机和激光器位置固定好，不论是旋转扫描还是平移扫描，，还需找到一个适合的世界坐标系位置。如平移式扫描可以将世界坐标系固定在移动导轨上，以移动方向为$Z$轴，垂直导轨的平面为$XOY$面；旋转式扫描可以将世界坐标系中心固定在转台中心，以转台平面为$YOZ$面，垂直转台的方向为$X$轴。</p>
<p><img src="/images/LaserScannar/capture-2022-03-31-15-25-30.jpg" style="zoom:40%;"></p>
<p>将棋盘格垂直放置在转台或导轨上的$XOZ$面和$XOY$面，并且使棋盘格上的某一角点位于世界坐标系的原点。这样，棋盘格上的每一个角点的世界坐标都能够轻易得知。通过相机拍摄可以得到两组不同位置的棋盘格图像。通过棋盘格角点检测算法可以检测出图像上的每一个角点，可得到角点的像素坐标。至此，已经得知相机内参矩阵$K$，世界坐标$P_W$，像素坐标$p$，可以通过<a target="_blank" rel="noopener" href="https://www.jianshu.com/p/b3e9fb2ad0dc">PNP算法</a>求解相机位姿，得到外参$R,T$。</p>
<blockquote>
<p>已知相机内参矩阵$K$，世界坐标$P_W$，像素坐标$p$，也可以通过罚函数约束标定法求解$R,T$。具体内容可参考杨院长的<a target="_blank" rel="noopener" href="https://gitee.com/corpse-dog/sourcetreetest/raw/master/%E6%97%8B%E8%BD%AC%E6%89%AB%E6%8F%8F%E7%BA%BF%E7%BB%93%E6%9E%84%E5%85%89%E4%B8%89%E7%BB%B4%E6%B5%8B%E9%87%8F.pptx"><em>PPT</em></a></p>
</blockquote>
<p><img src="/images/LaserScannar/capture-2022-03-31-15-21-58.jpg" style="zoom:40%;"></p>
<p>激光平面的标定同样使用棋盘格平面，将棋盘格放在$XOY$面和$XOZ$面上，打开激光器，激光线条打在棋盘格平面上，通过相机拍摄可以得到两组激光图像。通过<strong>光条检测算法</strong>可以得到图像上的激光特征点，从而拟合出一条激光线。棋盘格角点检测算法可以检测出棋盘格每条横线上的角点，一幅图像可以拟合多条棋盘格横线。通过联立直线方程，可以求得激光线与每条横线的交点的像素坐标。</p>
<p><img src="/images/LaserScannar/QQ%E6%88%AA%E5%9B%BE20220331164426.png" style="zoom:50%;"></p>
<p>交点的像素坐标已知，可以通过相似三角形求得激光与棋盘横线的世界坐标。如图，假如棋盘格平面位于$XOY$面上，则$M(x,y_1,0)$，$ N(x,y_2,0) $坐标都可立即得知，由于$MNP$位于同一横线上，则$P(x,y_3,0)$坐标只有$y_3$未知。上文可知$m(u_1,v_1)$，$n(u_2,v_2)$，$p(u_3,v_3)$的像素坐标，通过相似关系可以得到$\frac {mp}{mn}=\frac {MP}{MN}$，从而可以求出$P$点坐标。</p>
<script type="math/tex; mode=display">
\frac {mp}{mn}=\frac {u_3-u_1}{u_2-u_1},\frac {MP}{MN}=\frac {y_3-y_1}{y_2-y_1}</script><script type="math/tex; mode=display">
y_3=y_1-\frac{(u_3-u_1)(y_1-y_2)}{u_2-u_1}</script><p><img src="/images/LaserScannar/1.jpg" style="zoom:50%;"></p>
<p>一副激光图像可以得到一组三维空间中的激光线交点，但一组点仅能代表空间中激光平面里的的一条直线。所以，棋盘格分别放在$XOY$面和$XOZ$面上，可以得到两组点，来拟合三维世界坐标系中的激光平面，可以通过最小二乘计算出平面方程$ Ax+By+Cz=D $.</p>
<blockquote>
<p>为了使平面方程更具有鲁棒性，可以再次添加棋盘格放置在$XOY$面的激光图像，得到三组结果，使得平面拟合结果更加准确。</p>
</blockquote>
<h3 id="Reconstruction"><a href="#Reconstruction" class="headerlink" title="Reconstruction"></a>Reconstruction</h3><p>在进行激光扫描时，拍摄某一时刻的激光图像，使用<strong>光条检测算法</strong>提取激光点$p(u,v)$，通过公式$ P’_W=R^-(K^-p)-T $，计算得出点$p$在世界坐标系下的像点$ P’_W=(a,b,c)^T $，但该点并不是真实点。同时，再通过平移向量$T$计算得到相机中心在世界坐标系下的坐标$ P_{CO}=-T=(-t_1,-t_2,-t_3)^T $。由此，可得到$ P’_WP_{CO} $直线方程，通过与标定得到的激光平面方程联立起来，可得到唯一坐标$P(x,y,z)$.</p>
<script type="math/tex; mode=display">
\begin{cases}l:&\frac {x+t_1}{a+t_1}=\frac {y+t_2}{b+t_2}=\frac {z+t_3}{c+t_3}=k\\[2ex]
plane:&Ax+By+Cz=D\end{cases}</script><p>在某一个激光扫描时刻，不仅要得到当前图像上激光点的世界坐标，还要计算出之前得到的点坐标在移动或旋转后的新坐标。在这一方面计算时，平移式扫描和旋转式扫描稍有不同。</p>
<ul>
<li><strong>平移式扫描</strong></li>
</ul>
<p>以上述的平移扫描装置为例，移动导轨的平移方向为$Z$轴方向。假设，导轨每次移动的距离为$d$，移动的次数为$n$。则移动后的点$P’=(x,y,z+nd)$。</p>
<ul>
<li><strong>旋转式扫描</strong></li>
</ul>
<p>以上述的旋转扫描系统为例，$X$轴即为转轴。假设转台旋转方向为逆时针方向，每次旋转角度为$\alpha$，旋转次数为$n$，相当于点$P$绕$X$轴逆时针旋转了$\theta=n\alpha$。此时，可以通过旋转矩阵计算旋转后的坐标。</p>
<script type="math/tex; mode=display">
P'=\begin{bmatrix}
1 & 0 & 0 \\ 
0 & cos\theta & sin\theta \\
0 & -sin\theta & cos\theta\\
\end{bmatrix}\begin{bmatrix}
x \\ y \\ z\\
\end{bmatrix}=\begin{bmatrix}
x \\ ycos\theta+zsin\theta \\ -ysin\theta+zcos\theta\\
\end{bmatrix}</script><h2 id="Code"><a href="#Code" class="headerlink" title="Code"></a>Code</h2><ul>
<li><p><strong>Steger光条检测算法</strong></p>
<blockquote>
<p>常用的激光检测算法有极值法、灰度重心法、Steger算法等，通过查阅相关文献了解到Steger算法具有精度更高的测量结果。具体算法过程可参考<a target="_blank" rel="noopener" href="https://blog.csdn.net/Dangkie/article/details/78996761">光条中心线提取-Steger算法（基于Hessian矩阵）_Dangkie的博客-CSDN博客_steger</a></p>
</blockquote>
</li>
</ul>
<pre class="line-numbers language-none"><code class="language-none">using namespace std;
using namespace cv;
class Steger {
public:
	Steger(Mat, int);
	~Steger();
    void Init();
    void FindCenterLine(vector&lt;Point2f&gt;&amp;);
    void FindNormal(int, int, double&amp;, double&amp;);
	Mat Img;
    int Threshold;
	Mat dx, dy;
	Mat dxx, dyy, dxy;

private:

};

Steger::Steger(Mat image, int thres) {
    Threshold = thres;
    Img = image;
    cvtColor(Img, Img, COLOR_BGR2GRAY);
    cout &lt;&lt; "size of Img:" &lt;&lt; Img.cols &lt;&lt; "*" &lt;&lt; Img.rows &lt;&lt; endl;
}
Steger::~Steger() {

}
void Steger::Init() {
    Mat image;
    Img.convertTo(image, CV_32FC1);
    GaussianBlur(image, image, Size(0, 0), 6, 6);
    Mat m1, m2, m3, m4, m5;
    m1 = (Mat_&lt;float&gt;(3, 1) &lt;&lt; 1, 0, -1);  //x偏导
    m2 = (Mat_&lt;float&gt;(1, 3) &lt;&lt; 1, 0, -1);  //y偏导
    m3 = (Mat_&lt;float&gt;(3, 1) &lt;&lt; 1, -2, 1);   //二阶x偏导
    m4 = (Mat_&lt;float&gt;(1, 3) &lt;&lt; 1, -2, 1);   //二阶y偏导
    m5 = (Mat_&lt;float&gt;(2, 2) &lt;&lt; 1, -1, -1, 1);   //二阶xy偏导

    filter2D(image, dx, CV_32FC1, m1);
    filter2D(image, dy, CV_32FC1, m2);
    filter2D(image, dxx, CV_32FC1, m3);
    filter2D(image, dyy, CV_32FC1, m4);
    filter2D(image, dxy, CV_32FC1, m5);
}
void Steger::FindNormal(int y, int x, double&amp; nx, double&amp; ny) {
    Mat hessian(2, 2, CV_32FC1);
    hessian.at&lt;float&gt;(0, 0) = dxx.at&lt;float&gt;(y, x);
    hessian.at&lt;float&gt;(0, 1) = dxy.at&lt;float&gt;(y, x);
    hessian.at&lt;float&gt;(1, 0) = dxy.at&lt;float&gt;(y, x);
    hessian.at&lt;float&gt;(1, 1) = dyy.at&lt;float&gt;(y, x);

    Mat eValue;
    Mat eVectors;
    eigen(hessian, eValue, eVectors);  //两个特征值
    //点(x,y)的法线方向可由该点 Hessian 矩阵绝对值最大的特征值所对应的特征向量(nx,ny)给出
    //cout &lt;&lt; eValue &lt;&lt; endl;
    if (fabs(eValue.at&lt;float&gt;(0, 0)) &gt;= fabs(eValue.at&lt;float&gt;(1, 0)))  //fabs返回浮点数绝对值
    {
        nx = eVectors.at&lt;float&gt;(0, 0); //特征向量
        ny = eVectors.at&lt;float&gt;(0, 1);    }
    else
    {
        nx = eVectors.at&lt;float&gt;(1, 0);
        ny = eVectors.at&lt;float&gt;(1, 1);
    }
}
void Steger::FindCenterLine(vector&lt;Point2f&gt;&amp; Pts) {
    for (int i = 0; i &lt; Img.cols; i++)
    {
        for (int j = 0; j &lt; Img.rows; j++)
        {
            if (Img.at&lt;uchar&gt;(j, i) &gt;= Threshold)
            {
                double nx, ny;
                FindNormal(j, i, nx, ny);//寻找激光光条法线方向
                // 判断亚像素点是否在该像素内，该点 (x0,y0) 为光条的中心点， (px,py) 则为亚像素坐标
                double bottom = (nx * nx * dxx.at&lt;float&gt;(j, i) + 2 * nx * ny * dxy.at&lt;float&gt;(j, i) + ny * ny * dyy.at&lt;float&gt;(j, i));
                if (bottom != 0) {
                    double t = -(nx * dx.at&lt;float&gt;(j, i) + ny * dy.at&lt;float&gt;(j, i)) / bottom;
                    if (fabs(t * nx) &lt;= 0.5 &amp;&amp; fabs(t * ny) &lt;= 0.5)
                    {
                        Pts.push_back(Point2f(i + t * nx, j + t * ny));
                    }
                }
            }
        }
    }
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<ul>
<li><p><strong>棋盘靶标算法</strong></p>
<blockquote>
<p>其中棋盘格角点检测算法采用opencv<code>findChessboardCorners</code>函数，参考自<a target="_blank" rel="noopener" href="https://blog.csdn.net/Touch_Dream/article/details/84426211">opencv寻找棋盘格点位置_老司机的诗和远方的博客-CSDN博客_opencv找棋盘格</a>；最小二乘拟合平面算法参考自<a target="_blank" rel="noopener" href="https://my.oschina.net/u/1046919/blog/1612923/">opencv3 最小二乘拟合平面 - KyJason的个人空间 - OSCHINA - 中文开源技术交流社区</a>，也浏览到使用<a target="_blank" rel="noopener" href="https://immortalqx.github.io/2021/11/28/ransac/">RANSAC算法拟合平面</a>，后续可以进行相关改进。</p>
</blockquote>
</li>
</ul>
<pre class="line-numbers language-none"><code class="language-none">using namespace std;
using namespace cv;
class Calibrate {
public:
	Calibrate(Mat, vector&lt;Mat&gt;, vector&lt;Mat&gt;, int, int, int, int, int);
	~Calibrate();
	void chessDetect(Mat&amp;, vector&lt;Point2f&gt;&amp;);//检测棋盘格图像上的角点
	void getWorldPoint(vector&lt;Point3f&gt;&amp;);//获取每个角点对应的世界点坐标
	void drawLine(Mat&amp;, Vec4f); //根据获取的直线方程，找到两个端点绘制直线
	Point2f getlinePoint(Vec4f, Vec4f);//根据两个直线方程获取直线交点
	void getCrossWorld(Point3f&amp;, vector&lt;Point3f&gt;, vector&lt;Point2f&gt;, Point2f);
	vector&lt;Point3f&gt; getLaserPoint(Mat&amp;, Mat&amp;, vector&lt;Point3f&gt;, vector&lt;Point2f&gt;, Mat);
	Mat fitPlane(const Mat);
	void getRotation(vector&lt;Mat&gt;&amp;);
	void Calibration(Mat&amp;, Mat&amp;, Mat&amp;);//标定
	vector&lt;Mat&gt; ChessImage;  //棋盘格放置在世界坐标系不同位置所拍摄的图像
	vector&lt;Mat&gt; LaserImage;   //对应的每个位置拍摄激光的图像
	int gridSize;  //每个棋盘格点大小，单位mm
	int col, row;  //棋盘格点的行列数
	int initRow, initCol;  //世界坐标系原点所在的行数+1，与列数
	Mat K;

private:

};

//光条检测
vector&lt;Point2f&gt; LaserDetect(Mat&amp; img) {
	int threshold = 120;
	Steger Image = Steger(img, threshold);
	Image.Init();
	vector&lt;Point2f&gt; Pt;
	Image.FindCenterLine(Pt);
	cout &lt;&lt; Pt.size() &lt;&lt; endl;
	for (int k = 0; k &lt; Pt.size(); k++) {
		circle(img, Pt[k], 1, Scalar(0, 255, 255), -1);
	}
	return Pt;
}

Calibrate::Calibrate(Mat k, vector&lt;Mat&gt; chessimg, vector&lt;Mat&gt; laserimg, int Col, int Row, int GridSize, int InitRow = 0, int InitCol = 0) {
	ChessImage = chessimg;
	LaserImage = laserimg;
	col = Col;
	row = Row;
	gridSize = GridSize;
	initRow = InitRow;
	initCol = InitCol;
	K = k;
}
Calibrate::~Calibrate() {

}
void Calibrate::chessDetect(Mat&amp; img, vector&lt;Point2f&gt;&amp; corners) {
	Size board_size = Size(col, row);
	Mat gray;
	cvtColor(img, gray, COLOR_BGR2GRAY);
	bool patternfound = findChessboardCorners(img, board_size, corners, CALIB_CB_ADAPTIVE_THRESH + CALIB_CB_NORMALIZE_IMAGE);
	if (!patternfound) {
		cout &lt;&lt; "can not find chessboard corners!" &lt;&lt; endl;
		return;
	}
	else {//亚像素精确化
		cornerSubPix(gray, corners, Size(11, 11), Size(-1, -1), TermCriteria(TermCriteria::EPS + TermCriteria::MAX_ITER, 30, 0.1));
	}
	cout &lt;&lt; corners.size() &lt;&lt; endl;
	for (int i = 0; i &lt; corners.size(); i++)
	{
		circle(img, corners[i], 2, cv::Scalar(255, 0, 255));
		putText(img, to_string(i + 1), corners[i], FONT_HERSHEY_SIMPLEX, 0.7, Scalar(0, 255, 0), 1, 2);
	}
}
void Calibrate::getWorldPoint(vector&lt;Point3f&gt;&amp; worldPt) {
	for (int i = 0; i &lt; row; i++) {
		for (int j = 0; j &lt; col; j++) {
			//在标定外参时，将棋盘格垂直放置在平台上，并位于XOY面
			//使某一点位于世界坐标系原点上（通常是棋盘格的最后一行）
			//但是在角点检测时，最后一行不检测，检测顺序是从左上到右下
			//世界坐标是从右下到左上
			Point3f pt = Point3f((initRow - i) * gridSize, (initCol - j) * gridSize, 0.0);
			worldPt.push_back(pt);
		}
	}
}
void Calibrate::drawLine(Mat&amp; img, Vec4f current) {
	//current[a,b,x0,y0]  k=b/a;y=k*(x-x0)+y0
	Point2f point1 = Point2f(0, current[3] - current[2] * (current[1] / current[0]));
	Point2f point2 = Point2f(img.cols, current[3] + (img.cols - current[2]) * (current[1] / current[0]));
	line(img, point1, point2, Scalar(0, 0, 255), 1);
}
Point2f Calibrate::getlinePoint(Vec4f lineParam1, Vec4f lineParam2) {
	float k1 = lineParam1[1] / lineParam1[0];
	float b1 = lineParam1[3] - k1 * lineParam1[2];
	float k2 = lineParam2[1] / lineParam2[0];
	float b2 = lineParam2[3] - k2 * lineParam2[2];
	float x = (b1 - b2) / (k2 - k1);
	Point2f point = Point2f(x, k1 * x + b1);
	return point;
}
//获取世界坐标系下XOY面交点坐标
void Calibrate::getCrossWorld(Point3f&amp; Wp, vector&lt;Point3f&gt; world, vector&lt;Point2f&gt; img, Point2f p) {
	//本函数默认是采用XOY面计算的
	float mp_mn = (p.x - img[0].x) / (img[1].x - img[0].x);
	float Py = world[0].y - (world[0].y - world[1].y) * mp_mn;
	Wp = Point3f(world[0].x, Py, world[0].z);
}
vector&lt;Point3f&gt; Calibrate::getLaserPoint(Mat&amp; img, Mat&amp; Laser, vector&lt;Point3f&gt; worldPt, vector&lt;Point2f&gt; imgPt, Mat R) {
	vector&lt;Point2f&gt; LaserPt = LaserDetect(Laser);  //光条检测
	Vec4f LaserLine;   //获取激光所在的直线
	fitLine(LaserPt, LaserLine, DIST_L2, 0, 0.01, 0.01);  //拟合光条直线
	drawLine(Laser, LaserLine);
	drawLine(img, LaserLine);
	vector&lt;Point2f&gt;* temp = new vector&lt;Point2f&gt;[row];  //存放棋盘格上每条横线的点
	vector&lt;Point2f&gt;* imgNode = new vector&lt;Point2f&gt;[row];//存放图像下每条横线的两个端点mn
	vector&lt;Point3f&gt;* worldNode = new vector&lt;Point3f&gt;[row];//存放世界坐标系上每条横线的点两个端点MN
	int k = 0;
	for (int i = 0; i &lt; imgPt.size(); i++) {
		if (k &gt;= row)
			continue;
		temp[k].push_back(imgPt[i]);
		if (i % col == 0) {
			imgNode[k].push_back(imgPt[i]);
			worldNode[k].push_back(worldPt[i]);
		}
		if ((i + 1) % col == 0) {
			imgNode[k].push_back(imgPt[i]);
			worldNode[k].push_back(worldPt[i]);
			k++;
		}
	}
	vector&lt;Point2f&gt; crossPoint;
	vector&lt;Point3f&gt; WorldCrossPoint;
	for (int i = 0; i &lt; row; i++) {
		Vec4f current;
		fitLine(temp[i], current, DIST_L2, 0, 0.01, 0.01);  //拟合棋盘格每条横线
		Point2f point = getlinePoint(LaserLine, current); //获取每条线与激光的交点
		Point3f WP;
		getCrossWorld(WP, worldNode[i], imgNode[i], point); //获取交点的世界坐标
		Mat pp = R * Mat(WP); //坐标转换
		WP = Point3f(pp.at&lt;float&gt;(0), pp.at&lt;float&gt;(1), pp.at&lt;float&gt;(2));//转为point
		drawLine(img, current);
		circle(img, point, 2, Scalar(0, 255, 255), -1);
		crossPoint.push_back(point);
		WorldCrossPoint.push_back(WP);
	}
	cout &lt;&lt; crossPoint &lt;&lt; endl;
	cout &lt;&lt; WorldCrossPoint &lt;&lt; endl;
	delete[] temp;
	delete[] imgNode;
	delete[] worldNode;
	return WorldCrossPoint;
}
/* 最小二乘拟合平面，平面方程：Ax+By+Cz=D */
Mat Calibrate::fitPlane(const Mat points) {
	cout &lt;&lt; points.size() &lt;&lt; endl;
	int rows = points.rows;
	int cols = points.cols;
	Mat centroid = Mat::zeros(1, cols, CV_32FC1); // 平均坐标
	for (int i = 0; i &lt; cols; i++) {
		for (int j = 0; j &lt; rows; j++) {
			centroid.at&lt;float&gt;(0, i) += points.at&lt;float&gt;(j, i);
		}
		centroid.at&lt;float&gt;(0, i) /= rows;
	}
	Mat points2 = Mat::ones(rows, cols, CV_32FC1);//A矩阵
	for (int i = 0; i &lt; rows; i++) {
		for (int j = 0; j &lt; cols; j++) {
			points2.at&lt;float&gt;(i, j) = points.at&lt;float&gt;(i, j) - centroid.at&lt;float&gt;(0, j);
		}
	}
	Mat A, W, U, VT;
	gemm(points2, points, 1, NULL, 0, A, GEMM_1_T);
	SVD::compute(A, W, U, VT);  //奇异值分解
	Mat plane = Mat::zeros(cols + 1, 1, CV_32FC1);
	for (int c = 0; c &lt; cols; c++) {
		plane.at&lt;float&gt;(c, 0) = VT.at&lt;float&gt;(cols - 1, c);
		plane.at&lt;float&gt;(cols, 0) += plane.at&lt;float&gt;(c, 0) * centroid.at&lt;float&gt;(0, c); //d
	}
	cout &lt;&lt; plane &lt;&lt; endl;
	return plane;
}
void Calibrate::getRotation(vector&lt;Mat&gt;&amp; Rotation) {
	//XOY面棋盘格逆时针绕X轴旋转90度到XOZ面
	//XOY面
	Mat R1(Matx33f(
		1, 0, 0,
		0, 1, 0,
		0, 0, 1
	));
	//XOZ面
	Mat R2(Matx33f(
		1, 0, 0,
		0, 0, 1,
		0, -1, 0
	));
	Rotation.push_back(R1);
	Rotation.push_back(R2);
}
void Calibrate::Calibration(Mat&amp; R, Mat&amp; T, Mat&amp; plane) {
	if (ChessImage.size() != LaserImage.size())
		return;
	vector&lt;Point2f&gt; AllChessPoint;  //所有的棋盘格点
	vector&lt;Point3f&gt; AllWorldPoint;  //棋盘格点对应的世界坐标系点，用于计算外参
	vector&lt;Point3f&gt; LaserWorldPoint;  //激光线与棋盘格横线的交点的世界坐标，用于拟合激光平面
	int n = ChessImage.size();
	vector&lt;Mat&gt; Rotation;
	getRotation(Rotation);
	for (int t = 0; t &lt; ChessImage.size(); t++) {
		if (ChessImage[t].size() != LaserImage[t].size())  //保证每张图像以及对应的激光图像尺寸相同
			continue;
		vector&lt;Point2f&gt; chessPoint;  
		chessDetect(ChessImage[t], chessPoint);
		vector&lt;Point3f&gt; worldPoint;//获取的只是XOY面坐标
		getWorldPoint(worldPoint);
		Mat pp = Mat(worldPoint).reshape(1, col * row);  //vector&lt;point&gt; to Mat
		Mat ppp = (Rotation[t] * pp.t()).t();  //乘上旋转矩阵得到另一面的坐标
		vector&lt;Point3f&gt; worldChange = Mat_&lt;Point3f&gt;(ppp);  // Mat to vector&lt;point&gt;
		cout &lt;&lt; worldChange &lt;&lt; endl;
		vector&lt;Point3f&gt; WorldCrossPoint = getLaserPoint(ChessImage[t], LaserImage[t], worldPoint, chessPoint, Rotation[t]);
		AllChessPoint.insert(AllChessPoint.end(), chessPoint.begin(), chessPoint.end());                //size=n*col*row
		AllWorldPoint.insert(AllWorldPoint.end(), worldChange.begin(), worldChange.end());                //size=n*col*row
		LaserWorldPoint.insert(LaserWorldPoint.end(), WorldCrossPoint.begin(), WorldCrossPoint.end());  //size=n*row;
	}
	solvePnPRansac(AllWorldPoint, AllChessPoint, K, noArray(), R, T);  //pnp求解r,t
	Rodrigues(R, R);
	Mat Rt;
	hconcat(R, T, Rt);
	cout &lt;&lt; "外参矩阵：" &lt;&lt; Rt &lt;&lt; endl;
	Mat M = K * Rt;  //投影矩阵
	cout &lt;&lt; "投影矩阵：" &lt;&lt; M &lt;&lt; endl;
	//拟合三维激光平面
	Mat PointMat = Mat(LaserWorldPoint).reshape(1, n * row);//将点坐标转化为矩阵形式: n*dim
	plane = fitPlane(PointMat);
}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ol>
<li>钦星晨. 自旋转式线结构光三维测量关键技术研究[D].电子科技大学,2021.DOI:10.27005/d.cnki.gdzku.2021.003676.</li>
<li>王云飞. 旋转扫描线结构光三维测量系统[D].长安大学,2020.DOI:10.26976/d.cnki.gchau.2020.001380.</li>
</ol>

                
            </div>
            <hr/>

            

    <div class="reprint" id="reprint-statement">
        
            <div class="reprint__author">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-user">
                        Author:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="/about" rel="external nofollow noreferrer">Leo</a>
                </span>
            </div>
            <div class="reprint__type">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-link">
                        Link:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="https://Liuyveg.github.io/2022/03/30/laserscannar/">https://Liuyveg.github.io/2022/03/30/laserscannar/</a>
                </span>
            </div>
            <div class="reprint__notice">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-copyright">
                        Reprint policy:
                    </i>
                </span>
                <span class="reprint-info">
                    All articles in this blog are used except for special statements
                    <a href="https://creativecommons.org/licenses/by/4.0/deed.zh" rel="external nofollow noreferrer" target="_blank">CC BY 4.0</a>
                    reprint policy. If reproduced, please indicate source
                    <a href="/about" target="_blank">Leo</a>
                    !
                </span>
            </div>
        
    </div>

    <script async defer>
      document.addEventListener("copy", function (e) {
        let toastHTML = '<span>Copied successfully, please follow the reprint policy of this article</span><button class="btn-flat toast-action" onclick="navToReprintStatement()" style="font-size: smaller">more</a>';
        M.toast({html: toastHTML})
      });

      function navToReprintStatement() {
        $("html, body").animate({scrollTop: $("#reprint-statement").offset().top - 80}, 800);
      }
    </script>



            <div class="tag_share" style="display: block;">
                <div class="post-meta__tag-list" style="display: inline-block;">
                    
                        <div class="article-tag">
                            
                                <a href="/tags/Laser-Scannar/">
                                    <span class="chip bg-color">Laser Scannar</span>
                                </a>
                            
                                <a href="/tags/3D-Reconstruction/">
                                    <span class="chip bg-color">3D-Reconstruction</span>
                                </a>
                            
                        </div>
                    
                </div>
                <div class="post_share" style="zoom: 80%; width: fit-content; display: inline-block; float: right; margin: -0.15rem 0;">
                    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/Liuyveg/Liuyveg.github.io/libs/share/css/share.min.css">
<div id="article-share">

    

    

</div>

                </div>
            </div>
            
                <style>
    #reward {
        margin: 40px 0;
        text-align: center;
    }

    #reward .reward-link {
        font-size: 1.4rem;
        line-height: 38px;
    }

    #reward .btn-floating:hover {
        box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2), 0 5px 15px rgba(0, 0, 0, 0.2);
    }

    #rewardModal {
        width: 320px;
        height: 350px;
    }

    #rewardModal .reward-title {
        margin: 15px auto;
        padding-bottom: 5px;
    }

    #rewardModal .modal-content {
        padding: 10px;
    }

    #rewardModal .close {
        position: absolute;
        right: 15px;
        top: 15px;
        color: rgba(0, 0, 0, 0.5);
        font-size: 1.3rem;
        line-height: 20px;
        cursor: pointer;
    }

    #rewardModal .close:hover {
        color: #ef5350;
        transform: scale(1.3);
        -moz-transform:scale(1.3);
        -webkit-transform:scale(1.3);
        -o-transform:scale(1.3);
    }

    #rewardModal .reward-tabs {
        margin: 0 auto;
        width: 210px;
    }

    .reward-tabs .tabs {
        height: 38px;
        margin: 10px auto;
        padding-left: 0;
    }

    .reward-content ul {
        padding-left: 0 !important;
    }

    .reward-tabs .tabs .tab {
        height: 38px;
        line-height: 38px;
    }

    .reward-tabs .tab a {
        color: #fff;
        background-color: #ccc;
    }

    .reward-tabs .tab a:hover {
        background-color: #ccc;
        color: #fff;
    }

    .reward-tabs .wechat-tab .active {
        color: #fff !important;
        background-color: #22AB38 !important;
    }

    .reward-tabs .alipay-tab .active {
        color: #fff !important;
        background-color: #019FE8 !important;
    }

    .reward-tabs .reward-img {
        width: 210px;
        height: 210px;
    }
</style>

<div id="reward">
    <a href="#rewardModal" class="reward-link modal-trigger btn-floating btn-medium waves-effect waves-light red">赏</a>

    <!-- Modal Structure -->
    <div id="rewardModal" class="modal">
        <div class="modal-content">
            <a class="close modal-close"><i class="fas fa-times"></i></a>
            <h4 class="reward-title">生异形吗 哥俩</h4>
            <div class="reward-content">
                <div class="reward-tabs">
                    <ul class="tabs row">
                        <li class="tab col s6 alipay-tab waves-effect waves-light"><a href="#alipay">支付宝</a></li>
                        <li class="tab col s6 wechat-tab waves-effect waves-light"><a href="#wechat">微 信</a></li>
                    </ul>
                    <div id="alipay">
                        <img src="https://cdn.jsdelivr.net/gh/Liuyveg/Liuyveg.github.io/medias/reward/alipay.jpg" class="reward-img" alt="支付宝打赏二维码">
                    </div>
                    <div id="wechat">
                        <img src="https://cdn.jsdelivr.net/gh/Liuyveg/Liuyveg.github.io/medias/reward/wechat.png" class="reward-img" alt="微信打赏二维码">
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    $(function () {
        $('.tabs').tabs();
    });
</script>

            
        </div>
    </div>

    

    

    

    

    

    

    

    

    

    

<article id="prenext-posts" class="prev-next articles">
    <div class="row article-row">
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge left-badge text-color">
                <i class="fas fa-chevron-left"></i>&nbsp;Previous</div>
            <div class="card">
                <a href="/2022/04/04/serration/">
                    <div class="card-image">
                        
                        
                        <img src="https://cdn.jsdelivr.net/gh/Liuyveg/Liuyveg.github.io/medias/featureimages/11.jpg" class="responsive-img" alt="锯齿靶标法标定激光平面">
                        
                        <span class="card-title">锯齿靶标法标定激光平面</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            
                        
                    </div>
                    <div class="publish-info">
                        <span class="publish-date">
                            <i class="far fa-clock fa-fw icon-date"></i>2022-04-04
                        </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/3D-Reconstruction/" class="post-category">
                                    3D-Reconstruction
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/Laser-Scannar/">
                        <span class="chip bg-color">Laser Scannar</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge right-badge text-color">
                Next&nbsp;<i class="fas fa-chevron-right"></i>
            </div>
            <div class="card">
                <a href="/2022/03/27/myfirstpost/">
                    <div class="card-image">
                        
                        
                        <img src="https://cdn.jsdelivr.net/gh/Liuyveg/Liuyveg.github.io/medias/featureimages/4.jpg" class="responsive-img" alt="myfirstpost">
                        
                        <span class="card-title">myfirstpost</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            
                        
                    </div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="far fa-clock fa-fw icon-date"></i>2022-03-27
                            </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-user fa-fw"></i>
                            Leo
                            
                        </span>
                    </div>
                </div>
                
            </div>
        </div>
        
    </div>
</article>

</div>



<!-- 代码块功能依赖 -->
<script type="text/javascript" src="https://cdn.jsdelivr.net/gh/Liuyveg/Liuyveg.github.io/libs/codeBlock/codeBlockFuction.js"></script>

<!-- 代码语言 -->


<!-- 代码块复制 -->

<script type="text/javascript" src="https://cdn.jsdelivr.net/gh/Liuyveg/Liuyveg.github.io/libs/codeBlock/codeCopy.js"></script>


<!-- 代码块收缩 -->

<script type="text/javascript" src="https://cdn.jsdelivr.net/gh/Liuyveg/Liuyveg.github.io/libs/codeBlock/codeShrink.js"></script>


    </div>
    <div id="toc-aside" class="expanded col l3 hide-on-med-and-down">
        <div class="toc-widget card" style="background-color: white;">
            <div class="toc-title"><i class="far fa-list-alt"></i>&nbsp;&nbsp;TOC</div>
            <div id="toc-content"></div>
        </div>
    </div>
</div>

<!-- TOC 悬浮按钮. -->

<div id="floating-toc-btn" class="hide-on-med-and-down">
    <a class="btn-floating btn-large bg-color">
        <i class="fas fa-list-ul"></i>
    </a>
</div>


<script src="https://cdn.jsdelivr.net/gh/Liuyveg/Liuyveg.github.io/libs/tocbot/tocbot.min.js"></script>
<script>
    $(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingsOffset: -($(window).height() * 0.4 - 45),
            collapseDepth: Number('0'),
            headingSelector: 'h1, h2, h3, h4'
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });

        
        /* 修复文章卡片 div 的宽度. */
        let fixPostCardWidth = function (srcId, targetId) {
            let srcDiv = $('#' + srcId);
            if (srcDiv.length === 0) {
                return;
            }

            let w = srcDiv.width();
            if (w >= 450) {
                w = w + 21;
            } else if (w >= 350 && w < 450) {
                w = w + 18;
            } else if (w >= 300 && w < 350) {
                w = w + 16;
            } else {
                w = w + 14;
            }
            $('#' + targetId).width(w);
        };

        // 切换TOC目录展开收缩的相关操作.
        const expandedClass = 'expanded';
        let $tocAside = $('#toc-aside');
        let $mainContent = $('#main-content');
        $('#floating-toc-btn .btn-floating').click(function () {
            if ($tocAside.hasClass(expandedClass)) {
                $tocAside.removeClass(expandedClass).hide();
                $mainContent.removeClass('l9');
            } else {
                $tocAside.addClass(expandedClass).show();
                $mainContent.addClass('l9');
            }
            fixPostCardWidth('artDetail', 'prenext-posts');
        });
        
    });
</script>

    

</main>


<script src="https://cdn.bootcss.com/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<script>
    MathJax.Hub.Config({
        tex2jax: {inlineMath: [['$', '$'], ['\\(', '\\)']]}
    });
</script>



    <footer class="page-footer bg-color">
    

    <div class="container row center-align"
         style="margin-bottom: 15px !important;">
        <div class="col s12 m8 l8 copy-right">
            Copyright&nbsp;&copy;
            
                <span id="year">2022</span>
            
            <a href="/about" target="_blank">Leo</a>
            |&nbsp;Powered by&nbsp;<a href="https://hexo.io/" target="_blank">Hexo</a>
            |&nbsp;Theme&nbsp;<a href="https://github.com/blinkfox/hexo-theme-matery" target="_blank">Matery</a>
            <br>
            
                &nbsp;<i class="fas fa-chart-area"></i>&nbsp;Total Words:&nbsp;<span
                        class="white-color">6.8k</span>
            
            
            
                
            
            
                <span id="busuanzi_container_site_pv">
                &nbsp;|&nbsp;<i class="far fa-eye"></i>&nbsp;Total visits:&nbsp;
                    <span id="busuanzi_value_site_pv" class="white-color"></span>
            </span>
            
            
                <span id="busuanzi_container_site_uv">
                &nbsp;|&nbsp;<i class="fas fa-users"></i>&nbsp;Total visitors:&nbsp;
                    <span id="busuanzi_value_site_uv" class="white-color"></span>
            </span>
            
            <br>

            <!-- 运行天数提醒. -->
            
                <span id="sitetime"> Loading ...</span>
                <script>
                    var calcSiteTime = function () {
                        var seconds = 1000;
                        var minutes = seconds * 60;
                        var hours = minutes * 60;
                        var days = hours * 24;
                        var years = days * 365;
                        var today = new Date();
                        var startYear = "2022";
                        var startMonth = "3";
                        var startDate = "28";
                        var startHour = "0";
                        var startMinute = "0";
                        var startSecond = "0";
                        var todayYear = today.getFullYear();
                        var todayMonth = today.getMonth() + 1;
                        var todayDate = today.getDate();
                        var todayHour = today.getHours();
                        var todayMinute = today.getMinutes();
                        var todaySecond = today.getSeconds();
                        var t1 = Date.UTC(startYear, startMonth, startDate, startHour, startMinute, startSecond);
                        var t2 = Date.UTC(todayYear, todayMonth, todayDate, todayHour, todayMinute, todaySecond);
                        var diff = t2 - t1;
                        var diffYears = Math.floor(diff / years);
                        var diffDays = Math.floor((diff / days) - diffYears * 365);

                        // 区分是否有年份.
                        var language = 'en';
                        if (startYear === String(todayYear)) {
                            document.getElementById("year").innerHTML = todayYear;
                            var daysTip = 'This site has been running for ' + diffDays + ' days';
                            if (language === 'zh-CN') {
                                daysTip = '本站已运行 ' + diffDays + ' 天';
                            } else if (language === 'zh-HK') {
                                daysTip = '本站已運行 ' + diffDays + ' 天';
                            }
                            document.getElementById("sitetime").innerHTML = daysTip;
                        } else {
                            document.getElementById("year").innerHTML = startYear + " - " + todayYear;
                            var yearsAndDaysTip = 'This site has been running for ' + diffYears + ' years and '
                                + diffDays + ' days';
                            if (language === 'zh-CN') {
                                yearsAndDaysTip = '本站已运行 ' + diffYears + ' 年 ' + diffDays + ' 天';
                            } else if (language === 'zh-HK') {
                                yearsAndDaysTip = '本站已運行 ' + diffYears + ' 年 ' + diffDays + ' 天';
                            }
                            document.getElementById("sitetime").innerHTML = yearsAndDaysTip;
                        }
                    }

                    calcSiteTime();
                </script>
            
            <br>
            
        </div>
        <div class="col s12 m4 l4 social-link social-statis">
    <a href="https://github.com/Liuyveg" class="tooltipped" target="_blank" data-tooltip="访问我的GitHub" data-position="top" data-delay="50">
        <i class="fab fa-github"></i>
    </a>



    <a href="mailto:liuyveg@gmail.com" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50">
        <i class="fas fa-envelope-open"></i>
    </a>







    <a href="tencent://AddContact/?fromId=50&fromSubId=1&subcmd=all&uin=2198298468" class="tooltipped" target="_blank" data-tooltip="QQ联系我: 2198298468" data-position="top" data-delay="50">
        <i class="fab fa-qq"></i>
    </a>







</div>
    </div>
</footer>

<div class="progress-bar"></div>


    <!-- 搜索遮罩框 -->
<div id="searchModal" class="modal">
    <div class="modal-content">
        <div class="search-header">
            <span class="title"><i class="fas fa-search"></i>&nbsp;&nbsp;Search</span>
            <input type="search" id="searchInput" name="s" placeholder="Please enter a search keyword"
                   class="search-input">
        </div>
        <div id="searchResult"></div>
    </div>
</div>

<script type="text/javascript">
$(function () {
    var searchFunc = function (path, search_id, content_id) {
        'use strict';
        $.ajax({
            url: path,
            dataType: "xml",
            success: function (xmlResponse) {
                // get the contents from search data
                var datas = $("entry", xmlResponse).map(function () {
                    return {
                        title: $("title", this).text(),
                        content: $("content", this).text(),
                        url: $("url", this).text()
                    };
                }).get();
                var $input = document.getElementById(search_id);
                var $resultContent = document.getElementById(content_id);
                $input.addEventListener('input', function () {
                    var str = '<ul class=\"search-result-list\">';
                    var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
                    $resultContent.innerHTML = "";
                    if (this.value.trim().length <= 0) {
                        return;
                    }
                    // perform local searching
                    datas.forEach(function (data) {
                        var isMatch = true;
                        var data_title = data.title.trim().toLowerCase();
                        var data_content = data.content.trim().replace(/<[^>]+>/g, "").toLowerCase();
                        var data_url = data.url;
                        data_url = data_url.indexOf('/') === 0 ? data.url : '/' + data_url;
                        var index_title = -1;
                        var index_content = -1;
                        var first_occur = -1;
                        // only match artiles with not empty titles and contents
                        if (data_title !== '' && data_content !== '') {
                            keywords.forEach(function (keyword, i) {
                                index_title = data_title.indexOf(keyword);
                                index_content = data_content.indexOf(keyword);
                                if (index_title < 0 && index_content < 0) {
                                    isMatch = false;
                                } else {
                                    if (index_content < 0) {
                                        index_content = 0;
                                    }
                                    if (i === 0) {
                                        first_occur = index_content;
                                    }
                                }
                            });
                        }
                        // show search results
                        if (isMatch) {
                            str += "<li><a href='" + data_url + "' class='search-result-title'>" + data_title + "</a>";
                            var content = data.content.trim().replace(/<[^>]+>/g, "");
                            if (first_occur >= 0) {
                                // cut out 100 characters
                                var start = first_occur - 20;
                                var end = first_occur + 80;
                                if (start < 0) {
                                    start = 0;
                                }
                                if (start === 0) {
                                    end = 100;
                                }
                                if (end > content.length) {
                                    end = content.length;
                                }
                                var match_content = content.substr(start, end);
                                // highlight all keywords
                                keywords.forEach(function (keyword) {
                                    var regS = new RegExp(keyword, "gi");
                                    match_content = match_content.replace(regS, "<em class=\"search-keyword\">" + keyword + "</em>");
                                });

                                str += "<p class=\"search-result\">" + match_content + "...</p>"
                            }
                            str += "</li>";
                        }
                    });
                    str += "</ul>";
                    $resultContent.innerHTML = str;
                });
            }
        });
    };

    searchFunc('/search.xml', 'searchInput', 'searchResult');
});
</script>

    <!-- 回到顶部按钮 -->
<div id="backTop" class="top-scroll">
    <a class="btn-floating btn-large waves-effect waves-light" href="#!">
        <i class="fas fa-arrow-up"></i>
    </a>
</div>


    <script src="https://cdn.jsdelivr.net/gh/Liuyveg/Liuyveg.github.io/libs/materialize/materialize.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/Liuyveg/Liuyveg.github.io/libs/masonry/masonry.pkgd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/Liuyveg/Liuyveg.github.io/libs/aos/aos.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/Liuyveg/Liuyveg.github.io/libs/scrollprogress/scrollProgress.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/Liuyveg/Liuyveg.github.io/libs/lightGallery/js/lightgallery-all.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/Liuyveg/Liuyveg.github.io/js/matery.js"></script>

    

    

    <!-- 雪花特效 -->
    

    <!-- 鼠标星星特效 -->
    

    

    <!-- Baidu Analytics -->

    <!-- Baidu Push -->

<script>
    (function () {
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
            bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        } else {
            bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
</script>

    
    <script src="https://cdn.jsdelivr.net/gh/Liuyveg/Liuyveg.github.io/libs/others/clicklove.js" async="async"></script>
    
    
    <script async src="https://cdn.jsdelivr.net/gh/Liuyveg/Liuyveg.github.io/libs/others/busuanzi.pure.mini.js"></script>
    

    

    

    <!--腾讯兔小巢-->
    
    

    
    
    <script type="text/javascript" size="150" alpha='0.6'
        zIndex="-1" src="https://cdn.jsdelivr.net/gh/Liuyveg/Liuyveg.github.io/libs/background/ribbon.min.js" async="async"></script>
    

    

    
    <script src="https://cdn.jsdelivr.net/gh/Liuyveg/Liuyveg.github.io/libs/instantpage/instantpage.js" type="module"></script>
    

</body>

</html>
